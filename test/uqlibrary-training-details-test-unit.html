<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>uqlibrary-training-details-test-unit</title>

  <script src="../bower_components/webcomponentsjs/webcomponents.min.js"></script>
  <script src="../bower_components/web-component-tester/browser.js"></script>
  <script src="../bower_components/test-fixture/test-fixture-mocha.js"></script>
  <link rel="import" href="../bower_components/test-fixture/test-fixture.html">

  <!-- Import the element to test -->
  <link rel="import" href="../elements/uqlibrary-training-details.html">

</head>
<body>

<test-fixture id="details">
  <template>
    <uqlibrary-training-details></uqlibrary-training-details>
  </template>
</test-fixture>

<script>


  suite('<uqlibrary-training-details> tests', function () {
    var element;

    setup(function () {
      element = fixture('details');
      element.event =
      {
        "entityId": 460367,
        "created": "2016-07-05T12:40:27.387+10:00",
        "updated": "2016-07-05T12:40:27.387+10:00",
        "name": "The Assignment Writing Process",
        "start": "2016-07-25T13:00:00+10:00",
        "end": "2016-07-25T14:00:00+10:00",
        "publish": "2016-06-17T00:00:00+10:00",
        "expire": "2016-07-25T14:00:00+10:00",
        "summary": "Gain a better understanding of the assignment writing process, as well as strategies to conduct research and write assignments that are well structured and clearly organised.",
        "details": "Gain a better understanding of the assignment writing process, as well as strategies to conduct research and write assignments that are well structured and clearly organised.",
        "venue": "Centre for Digital Scholarship - Room 501, Level 5, Duhig tower (Bldg 2), St Lucia (above Merlo Cafe)",
        "bookingType": 0,
        "bookingSettings": null,
        "workGroupId": null,
        "providers": {
          "organisations": [],
          "administrators": []
        },
        "attendance": {
          "total": 0,
          "unspecified": 0,
          "absent": 0,
          "attended": 0
        },
        "categories": {
          "eventType": "Undergraduate Student Events",
          "campus": [
            "St Lucia"
          ]
        }
      };
    });

    test('It should display event title in details view', function (done) {
      setTimeout(function() {

        expect(element.querySelector('.event-name .inverse')).not.to.be.null;
        expect(element.querySelector('.event-name .inverse').innerHTML).to.be.equal(element.event.name);

        done();
      }, 50);

    });

    test('It should not display login and book button by default', function (done) {
      expect(element.querySelector('#loginButton')).to.be.null;
      done();
    });

    test('It should display login and book button', function (done) {
      element.showLoginButton = true;
      setTimeout(function() {
        expect(element.querySelector('#loginButton')).not.to.be.null;
        done();
      }, 50);
    });

    test('It should display registration text', function (done) {
      setTimeout(function() {
        expect(element.querySelector('#registrationItem .body1').innerHTML).to.be.equal(element._bookingText);
      done();
      }, 50);
    });

    test('It should choose a correct url for map display', function (done) {
        setTimeout(function() {
            expect(element.querySelector('.maplink a').innerHTML).to.be.equal(element.event.venue);
            done();
        }, 50);
    });
  });
</script>

</body>
</html>
