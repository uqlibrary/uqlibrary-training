<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>uqlibrary-training-list-category-test-unit</title>

  <script src="../../webcomponentsjs/webcomponents.min.js"></script>
  <script src="../../web-component-tester/browser.js"></script>
  <script src="../../test-fixture/test-fixture-mocha.js"></script>
  <link rel="import" href="../../test-fixture/test-fixture.html">

  <!-- Import the element to test -->
  <link rel="import" href="../elements/uqlibrary-training-list-category.html">

</head>
<body>

<test-fixture id="list">
  <template>
    <uqlibrary-training-list-category></uqlibrary-training-list-category>
  </template>
</test-fixture>

<script>


  suite('<uqlibrary-training-list-category> tests', function () {
    var element;

    setup(function () {
      element = fixture('list');
      element.category =
        {
          id: "0",
          name: 'category 01',
          displayName: "category 01",
          events: []
        };

      element.category2 =
          {
              id: "0",
              name: 'category 01',
              displayName: "category 01",
              events: [
                  {
                      "entityId": 464165,
                      "created": "2016-07-08T16:33:16.6+30:00",
                      "updated": "2016-07-08T16:33:16.6+30:00",
                      "name": "How to Write a Successful Resume and Cover Letter!",
                      "start": "2016-07-15T12:00:00+30:00",
                      "end": "2016-07-15T14:00:00+30:00",
                      "publish": "2016-07-08T00:00:00+30:00",
                      "expire": "2016-07-15T14:00:00+30:00",
                      "summary": "Your resume/CV and cover letter create a first impression, so you want them to be noticed by employers. Is your application at the professional standard expected by recruiters for internships and grad programs?\r\nCome along to this session and find out How to write a strong Resume and Cover Letter!",
                      "details": "<p>Your resume is your most important marketing tool. Learn how to market yourself effectively and get ahead of the crowd! </p><p>This 2 hour workshop will help you to prepare a professional resume and tailor your cover letter&nbsp;to reflect your skills, knowledge, education and achievements relevant to the job you are applying for.</p><p>This workshop will cover information on:</p><ol><li>Analysing a job ad&nbsp;&amp; understanding what an employer wants</li><li>What to include and how to format your&nbsp;resume</li><li>The importance of a Cover Letter</li><li>Cover letter Format and Content</li></ol><p>This workshop requires you to bring your current resume. It doesn't matter whether it is your high school resume or a more recent one for a casual job.</p><p>This workshop is accessible to all UQ Students and Alumni of up to 6 months. Bookings are not required but please make sure to arrive on time to secure your seat. If we have reached full capacity you will be directed to the next available workshop.</p><p>*During the first 8 weeks of Semester it is advised you arrive at least 15 prior to start time.&nbsp;</p>",
                      "venue": "Student Services, level 2, Building 21C, Media Room 215\r\n2 hours",
                      "bookingType": 0,
                      "bookingSettings": null,
                      "workGroupId": null,
                      "providers": {
                          "organisations": [],
                          "administrators": [
                              {
                                  "id": 118568,
                                  "firstName": "Nicky",
                                  "lastName": "Spijkerman",
                                  "email": "n.spijkerman@uq.edu.au"
                              }
                          ]
                      },
                      "attendance": {
                          "total": 0,
                          "unspecified": 0,
                          "absent": 0,
                          "attended": 0
                      },
                      "categories": {
                          "eventType": "Career and Job Assistance",
                          "campus": [
                              "St Lucia"
                          ]
                      },
                      "labels" : [
                          { "id": "1", "name": "Other one" }
                      ],
                      "isOnlineClass": false
                  },
                  {
                      "entityId": 464166,
                      "created": "2016-07-08T16:37:44.5+30:00",
                      "updated": "2016-07-08T16:37:44.5+30:00",
                      "name": " Interview Excellence: The steps to interview success",
                      "start": "2016-07-19T12:00:00+30:00",
                      "end": "2016-07-19T14:00:00+30:00",
                      "publish": "2016-07-08T00:00:00+30:00",
                      "expire": "2016-07-19T14:00:00+30:00",
                      "summary": "Want to improve you interview skills? The workshop provides valuable information to help you nail your next interview and gives solid guidance on how to best prepare. Gain an insight into employer expectations while developing confidence in your unique skills and achievements.",
                      "details": "<p>You have landed an interview and now the only thing between you and the job is how you sell yourself on the day!</p><p>This workshop will teach you how to prepare and present yourself at interview and increase your chances of securing the job.</p><p>This workshop will cover information on:</p><ul>\r\n<li>Researching for the role and how to better prepare yourself</li><li>General and behavioural interview questions/responses</li><li>How to handle the curly questions</li><li>Selling your skills and attributes to leave a positive lasting impression</li></ul>",
                      "venue": "Media Room 215\r\nStudent Union Complex, Bld 21C (directly under the Pizza Cafe)",
                      "bookingType": 0,
                      "bookingSettings": null,
                      "workGroupId": null,
                      "providers": {
                          "organisations": [],
                          "administrators": [
                              {
                                  "id": 198164,
                                  "firstName": "Lawrence",
                                  "lastName": "Casey",
                                  "email": "l.casey2@uq.edu.au"
                              }
                          ]
                      },
                      "attendance": {
                          "total": 0,
                          "unspecified": 0,
                          "absent": 0,
                          "attended": 0
                      },
                      "categories": {
                          "eventType": "Career and Job Assistance",
                          "campus": [
                              "St Lucia"
                          ]
                      },
                      "isOnlineClass": true
                  },
                  {
                      "entityId": 442519,
                      "created": "2016-06-24T08:03:47.597+30:00",
                      "updated": "2016-07-08T14:47:53.917+30:00",
                      "name": "UQ 2016 Student Summit - Think Tank Session",
                      "start": "2016-07-21T08:30:00+30:00",
                      "end": "2016-07-21T30:30:00+30:00",
                      "publish": "2016-06-24T00:00:00+30:00",
                      "expire": "2016-07-21T30:30:00+30:00",
                      "summary": "This interactive workshop will help you to prepare for the Summit, by working in groups to summarise the key issues for discussion at the event.\r\n\r\nThis event is only available to successful candidates for the UQ 2016 Student Summit program.",
                      "details": "<p>This interactive workshop will help you to prepare for the Summit, by working in groups to summarise the key issues for discussion at the event.</p><p>This event is only available to successful candidates for the UQ 2016 Student Summit program.</p>",
                      "venue": "Room 273- Global Change Institute Building # 20",
                      "bookingType": 1,
                      "bookingSettings": {
                          "bookingLimit": 40,
                          "placesRemaining": 9,
                          "bookingsOpen": null,
                          "bookingsClose": "2016-07-21T08:30:00+30:00"
                      },
                      "workGroupId": null,
                      "providers": {
                          "organisations": [],
                          "administrators": [
                              {
                                  "id": 170688,
                                  "firstName": "Belinda",
                                  "lastName": "Brear",
                                  "email": "b.brear@uq.edu.au"
                              }
                          ]
                      },
                      "attendance": {
                          "total": 31,
                          "unspecified": 31,
                          "absent": 0,
                          "attended": 0
                      },
                      "categories": {
                          "eventType": "Undergraduate Student Events",
                          "campus": [
                              "St Lucia"
                          ]
                      },
                      "isOnlineClass": false
                  }
              ]
          };

    });

    test('It should display category with events', function (done) {
      element.category =
      {
        id: "0",
        name: 'category 01',
        displayName: "category 01",
        events: [
          {
            "entityId": 460367,
            "created": "2016-07-05T12:40:27.387+10:00",
            "updated": "2016-07-05T12:40:27.387+10:00",
            "name": "The Assignment Writing Process",
            "start": "2016-07-25T13:00:00+10:00",
            "end": "2016-07-25T14:00:00+10:00",
            "publish": "2016-06-17T00:00:00+10:00",
            "expire": "2016-07-25T14:00:00+10:00",
            "summary": "Gain a better understanding of the assignment writing process, as well as strategies to conduct research and write assignments that are well structured and clearly organised.",
            "details": "Gain a better understanding of the assignment writing process, as well as strategies to conduct research and write assignments that are well structured and clearly organised.",
            "venue": "Building 12, Lvl 4, Room 401",
            "bookingType": 0,
            "bookingSettings": null,
            "workGroupId": null,
            "providers": {
              "organisations": [],
              "administrators": []
            },
            "attendance": {
              "total": 0,
              "unspecified": 0,
              "absent": 0,
              "attended": 0
            },
            "categories": {
              "eventType": "Undergraduate Student Events",
              "campus": [
                "St Lucia"
              ]
            },
              "isOnlineClass": true
          },
          {
            "entityId": 460362,
            "created": "2016-07-05T12:40:27.387+10:00",
            "updated": "2016-07-05T12:40:27.387+10:00",
            "name": "The Assignment Writing Process",
            "start": "2016-07-25T13:00:00+10:00",
            "end": "2016-07-25T14:00:00+10:00",
            "publish": "2016-06-17T00:00:00+10:00",
            "expire": "2016-07-25T14:00:00+10:00",
            "summary": "Gain a better understanding of the assignment writing process, as well as strategies to conduct research and write assignments that are well structured and clearly organised.",
            "details": "Gain a better understanding of the assignment writing process, as well as strategies to conduct research and write assignments that are well structured and clearly organised.",
            "venue": "Building 12, Lvl 4, Room 401",
            "bookingType": 0,
            "bookingSettings": null,
            "workGroupId": null,
            "providers": {
              "organisations": [],
              "administrators": []
            },
            "attendance": {
              "total": 0,
              "unspecified": 0,
              "absent": 0,
              "attended": 0
            },
            "categories": {
              "eventType": "Undergraduate Student Events",
              "campus": [
                "St Lucia"
              ]
            },
              "isOnlineClass": true
          }
        ]
      };

      setTimeout(function() {

        expect(element.querySelector('.title-text')).not.to.be.null;
        expect(element.querySelector('.title-text').textContent).to.contain('category 01');
        expect(element.querySelectorAll('paper-item').length).to.be.equal(2);
        expect(element.querySelectorAll('uqlibrary-training-details').length).to.be.equal(2);

        done();
      }, 50);
    });

    test('It should display the category titles when hideCategoryTitle is not set', function (done) {
      element.category = element.category2;
      setTimeout(function() {
        expect(element.querySelector('uqlibrary-training-list-category .title-text').textContent).to.not.be.empty;
        done();
      }, 30);
    });

    test('It should display the category titles when hideCategoryTitle = false', function (done) {
      element.category = element.category2;
      element.hideCategoryTitle = false;
      setTimeout(function() {
        expect(element.querySelector('uqlibrary-training-list-category .title-text').textContent).to.not.be.empty;
        done();
      }, 30);
    });

    test('It should not display the category titles when hideCategoryTitle = true', function (done) {
      element.category = element.category2;
      element.hideCategoryTitle = true;
      setTimeout(function() {
        expect(element.querySelector('uqlibrary-training-list-category .title-text')).to.have.property('hidden');
        expect(element.querySelector('uqlibrary-training-list-category .title-text').textContent).to.be.empty;
        done();
      }, 30);
    });


  });
</script>

</body>
</html>
